"use strict";(self.webpackChunkdesign=self.webpackChunkdesign||[]).push([[407],{2253:function(r,e,n){n.d(e,{Z:function(){return s}});n(2791);var t=n(184);var s=function(r){var e=r.className,n=r.children,s=r.styleAsProps;return(0,t.jsx)("section",{className:"section ".concat(e),style:s,children:(0,t.jsx)("div",{className:"row",children:n})})}},4407:function(r,e,n){n.r(e),n.d(e,{default:function(){return k}});var t=n(2791),s=n(4165),a=n(5861),i=n(1933),c=n(884),o=function(){var r=(0,a.Z)((0,s.Z)().mark((function r(){var e;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c.Z.get("home/total_sensors");case 3:return e=r.sent,r.abrupt("return",e);case 7:r.prev=7,r.t0=r.catch(0),console.log("Error Occured",r.t0.message);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}(),l=function(){var r=(0,a.Z)((0,s.Z)().mark((function r(e,n){var t;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c.Z.get("home/sensors_list?page=".concat(e,"&limit=").concat(n));case 3:return t=r.sent,r.abrupt("return",t);case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",r.t0.message);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,n){return r.apply(this,arguments)}}(),d=function(){var r=(0,a.Z)((0,s.Z)().mark((function r(){var e;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c.Z.get("home/total_open_alerts");case 3:return e=r.sent,r.abrupt("return",e);case 7:r.prev=7,r.t0=r.catch(0),console.log("Error Occured",r.t0.message);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}(),u=function(){var r=(0,a.Z)((0,s.Z)().mark((function r(){var e;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c.Z.get("home/sensor_temp_char");case 3:return e=r.sent,r.abrupt("return",e);case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",r.t0.message);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}(),h=function(){var r=(0,a.Z)((0,s.Z)().mark((function r(){var e;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c.Z.get("home/total_customers");case 3:return e=r.sent,r.abrupt("return",e);case 7:r.prev=7,r.t0=r.catch(0),console.log("Error Occured",r.t0.message);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}(),m=n(885),p=n(3504),x=n(2426),v=n.n(x),j=n(184);var f=function(r){for(var e=r.totalSensors,n=parseInt(e),s=(0,t.useState)(1),a=(0,m.Z)(s,2),c=a[0],o=a[1],d=(0,t.useState)(5),u=(0,m.Z)(d,2),h=u[0],x=(u[1],(0,t.useState)(5)),f=(0,m.Z)(x,2),g=f[0],b=(f[1],(0,t.useState)(5)),N=(0,m.Z)(b,2),y=N[0],Z=N[1],S=(0,t.useState)(0),k=(0,m.Z)(S,2),C=k[0],E=k[1],M={currentPage:c,itemsPerPage:h,onSuccess:function(r){},onError:function(r){return(0,j.jsx)("h1",{children:r.message})}},Y=function(r){var e=r.currentPage,n=r.itemsPerPage,t=r.onSuccess,s=r.onError;return(0,i.useQuery)(["sensors_list",e],(function(){return l(e,n)}),{onSuccess:t,onError:s})}(M),L=Y.isLoading,w=Y.isError,_=Y.data,O=Y.error,T=Y.isFetching,P=null===_||void 0===_?void 0:_.data.results,B=null===_||void 0===_?void 0:_.data.next,R=null===_||void 0===_?void 0:_.data.previous,U=[],A=1;A<=Math.ceil(n/h);A++)U.push(A);var D=function(r){o(Number(r.target.id))},F=null;U.length>y&&(F=(0,j.jsx)("li",{onClick:function(){o(c+1),c+1>y&&(Z(y+g),E(C+g))},children:" \u2026 "}));var Q=null;if(C>=1&&(Q=(0,j.jsx)("li",{onClick:function(){o(c-1),(c-1)%g===0&&(Z(y-g),E(C-g))},children:" \u2026 "})),L)return(0,j.jsx)("h2",{children:"Loading..."});if(w)return(0,j.jsx)("span",{children:O instanceof Error?(0,j.jsx)("h2",{children:O.message}):"Unexpected error"});var W=U.map((function(r){return r<y+1&&r>C?(0,j.jsx)("li",{id:r,onClick:D,className:c===r?"active":null,children:r},r):null}));return(0,j.jsx)("div",{className:"col-lg-12 m-t-20",children:(0,j.jsxs)("div",{className:"card",children:[(0,j.jsx)("div",{className:"filter",children:(0,j.jsx)("a",{className:"icon",href:"#",children:(0,j.jsx)("i",{className:"bi bi-gear"})})}),(0,j.jsxs)("div",{className:"card-body",children:[(0,j.jsx)("h5",{className:"card-title",children:"SENSOR LIST"}),(0,j.jsxs)("div",{className:"sensorListWrapper",children:[(0,j.jsx)("table",{className:"table table-striped",children:(0,j.jsx)("tbody",{children:P.map((function(r){var e=r.device_id,n=r.last_online,t=r.last_temp;r.customer;return function(r,e,n,t){return(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:r}),(0,j.jsxs)("td",{children:[v()(parseInt(e)).format("ll"),(0,j.jsx)("br",{}),(0,j.jsx)("small",{children:"Last Online"})]}),(0,j.jsxs)("td",{children:[n,(0,j.jsx)("br",{}),(0,j.jsx)("small",{children:"Temp"})]}),(0,j.jsxs)("td",{children:[t,(0,j.jsx)("br",{}),(0,j.jsx)("small",{children:"Location"})]}),(0,j.jsx)("td",{children:(0,j.jsx)("button",{className:"optionsButton",children:"Options"})}),(0,j.jsx)("td",{children:(0,j.jsx)(p.rU,{to:"/sensorDetails/".concat(r),children:(0,j.jsx)("button",{className:"detailsButton",children:"Details"})})})]},r)}(e,n,t,r.location)}))})}),(0,j.jsxs)("ul",{className:"pageNumbers",children:[(0,j.jsx)("li",{children:(0,j.jsx)("button",{onClick:function(){o(R.page)},disabled:1===c,children:"Prev"})}),Q,W,F,(0,j.jsx)("li",{children:(0,j.jsx)("button",{onClick:function(){o(B.page)},disabled:c===n,children:"Next"})})]}),(0,j.jsx)("div",{className:"col-12 loading",children:T&&"Loading..."})]})]})]})})},g=(n(994),n(9683)),b=n(6305);b.kL.register(b.FB,b.f$,b.od,b.jn,b.Dx,b.u,b.De);var N={maintainAspectRatio:!1,legend:{display:!1,position:"bottom"},scales:{x:{type:"time",time:{displayFormats:{millisecond:"MM/YY",second:"MM/YY",minute:"MM/YY",hour:"MM/YY",day:"MM/YY",week:"MM/YY",month:"MM/YY",quarter:"MM/YY",year:"MM/YY"},tooltipFormat:"DD/MM/YY"}},y:{ticks:{min:20,max:65,stepSize:5,callback:function(r,e,n){return r+".0 \xb0C"}}}}};var y=function(){var r=(0,i.useQuery)("chart_data",u),e=r.isLoading,n=r.isError,t=r.data,s=r.error;if(e)return(0,j.jsx)("h2",{children:"Loading..."});if(n)return(0,j.jsx)("span",{children:s instanceof Error?(0,j.jsx)("h2",{children:s.message}):"Unexpected error"});var a=null===t||void 0===t?void 0:t.data.records,c=a.map((function(r){return r.stats})),o=c[0].map((function(r){return{x:r.time,y:r.temp}})),l=c[1].map((function(r){return{x:r.time,y:r.temp}})),d=c[2].map((function(r){return{x:r.time,y:r.temp}})),h=a.map((function(r){return r.device_id})),m={datasets:[{label:h[0],data:o,borderColor:["rgb(186 181 181)"],backgroundColor:["rgba(255, 99, 132, 0.5)"],pointBackgroundColor:"rgb(255, 99, 132)",pointBorderColor:"rgba(255, 99, 132, 0.5)",borderWidth:1},{label:h[1],data:l,borderColor:["rgb(7 156 204)"],backgroundColor:["rgb(7 156 204)"],pointBackgroundColor:"rgb(7 156 204)",pointBorderColor:"rgb(7 156 204)",borderWidth:1},{label:h[2],data:d,borderColor:["rgb(244 108 119)"],backgroundColor:["rgb(233 30 46)"],pointBackgroundColor:"rgb(233 30 46)",pointBorderColor:"rgb(233 30 46)",borderWidth:1}]};return(0,j.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12",children:(0,j.jsx)("div",{className:"row",children:(0,j.jsxs)("div",{className:"sensorChartWrapper",children:[(0,j.jsx)("h4",{className:"chartTitle",children:"SENSORS TEMPRATURES"}),(0,j.jsx)(g.x1,{options:N,data:m})]})})})},Z=function(r){var e=r.title,n=r.iconName,t=r.data;return(0,j.jsx)("div",{className:"col-md-4",children:(0,j.jsx)("div",{className:"card",children:(0,j.jsx)("div",{className:"card-body",children:(0,j.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,j.jsxs)("div",{className:"ps-3",children:[(0,j.jsx)("h6",{children:e}),(0,j.jsx)("span",{className:"text-muted small pt-2 ps-1",children:t})]}),(0,j.jsx)("div",{className:"card-icon rounded-circle d-flex align-items-center justify-content-center",children:(0,j.jsx)("i",{className:"bi ".concat(n),style:{fontSize:"25px"}})})]})})})})},S=n(2253),k=function(){var r=(0,i.useQuery)("totalSensors",o),e=r.isLoading,n=r.isError,s=r.data,a=r.error,c=(0,i.useQuery)("totalAlerts",d),l=c.isLoading,u=c.isError,m=c.data,p=c.error,x=(0,i.useQuery)("totalCustomers",h),v=x.isLoading,g=x.isError,b=x.data,N=x.error,k=e||l||v,C=n||u||g,E=null===s||void 0===s?void 0:s.data.records;return k?(0,j.jsx)("h2",{children:"Loading..."}):C?(0,j.jsxs)("span",{children:[a instanceof Error?(0,j.jsx)("h2",{children:a.message}):"Unexpected error",p instanceof Error?(0,j.jsx)("h2",{children:p.message}):"Unexpected error",N instanceof Error?(0,j.jsx)("h2",{children:N.message}):"Unexpected error"]}):(0,j.jsx)(t.Fragment,{children:(0,j.jsxs)("main",{id:"main",className:"main",children:[(0,j.jsx)(S.Z,{className:"dashboard"}),(0,j.jsx)("div",{className:"col-lg-12",children:(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)(Z,{title:"TOTAL SENSORS",iconName:"bi-kanban",data:E}),(0,j.jsx)(Z,{title:"OPEN ALERTS",iconName:"bi-tags-fill",data:null===m||void 0===m?void 0:m.data.records}),(0,j.jsx)(Z,{title:"TOTAL CUSTOMERS",iconName:"bi-pc-display-horizontal",data:null===b||void 0===b?void 0:b.data.records})]})}),(0,j.jsx)(y,{}),(0,j.jsx)(f,{totalSensors:E})]})})}},884:function(r,e,n){var t=n(4569),s=n.n(t)().create({baseURL:"http://localhost:5000",headers:{"Content-Type":"application/json"}});e.Z=s}}]);
//# sourceMappingURL=407.73576318.chunk.js.map